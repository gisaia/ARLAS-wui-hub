<div class="collection">
    <div class="collection__header">
        <div class="collection__header__title">
            {{'Collections' | translate}}
        </div>
        <div class="collection__header__filter">
            @if (isAuthentActivated && authentMode === 'iam') {
            <div class="collection__header__filter--public">
                <mat-slide-toggle (change)="filterCollections()" [(ngModel)]="isPublic">{{'Is Public' | translate}}</mat-slide-toggle>
            </div>
            <div class="collection__header__filter--org">
                <mat-select [multiple]="true" [placeholder]="'Organisations' | translate" (selectionChange)="filterCollections()"
                    [(value)]="organisationsNames">
                    @for (org of organisations(); track $index) {
                    <mat-option [value]="org.name">{{org.displayName}}</mat-option>
                    }
                </mat-select>
            </div>
            }
            <div class="collection__header__filter--search">
                <input matInput [(ngModel)]="searchValue" (ngModelChange)="search()" [placeholder]="'Filter collection on name' | translate" />
            </div>
        </div>
    </div>
    <div class="collection__content">
        <table mat-table [dataSource]="filteredCollections()" matSort class="collection__content__table">

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Name' | translate}} </th>
                <td mat-cell *matCellDef="let row">
                    {{row.collection_name}}
                </td>
            </ng-container>

            <ng-container matColumnDef="display_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Display name' | translate}} </th>
                <td mat-cell *matCellDef="let row">
                    {{row.params.display_names.collection }}
                </td>
            </ng-container>

            <ng-container matColumnDef="owner">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Owner' | translate}} </th>
                <td mat-cell *matCellDef="let row">
                    {{row.params.organisations.owner}}
                </td>
            </ng-container>

            <ng-container matColumnDef="shared_with">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Shared with' | translate}} </th>
                <td mat-cell *matCellDef="let row">
                    {{row.params.organisations.shared}}
                </td>
            </ng-container>

            <ng-container matColumnDef="is_public">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'is Public' | translate}} </th>
                <td mat-cell *matCellDef="let row"> {{row.params.organisations.public}}
                </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>Action</th>
                <td mat-cell *matCellDef="let row">
                    <button mat-button (click)="openDelete(row.id)" matTooltip="Delete">
                        <mat-icon>delete</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="6">
                    {{'No data matching the filter' | translate}}

                </td>
            </tr>
        </table>
        <!-- <mat-paginator [disabled]="showSpinner" (page)="pageChange($event)" [pageIndex]="this.page - 1" [length]="total"
            [pageSize]="pageSize" [pageSizeOptions]="[10, 25, 100]"></mat-paginator> -->
    </div>
</div>
